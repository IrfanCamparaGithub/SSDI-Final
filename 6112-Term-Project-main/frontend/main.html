<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alpha - Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    .navbar-brand { font-weight: bold; }
    .card {
      border: none; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      border-radius: 10px; margin-bottom: 1.5rem;
    }
    .chart-container { position: relative; height: 400px; width: 100%; }


    body { background-color: #0b1020; color: #e5e7eb; }
    .navbar { background: linear-gradient(90deg, #0b1020 0%, #111827 70%, #0b1020 100%) !important; }
    .navbar .navbar-brand { letter-spacing: 0.5px; font-weight: 800; }
    .card { background-color: #0f172a; color: #e5e7eb; box-shadow: 0 8px 24px rgba(0,0,0,0.35); border: 1px solid #1f2937; }
    .card .card-title { color: #93c5fd; }
    .form-control, .form-select { background-color: #0b1020; color: #e5e7eb; border-color: #334155; }
    .btn-primary { background: #2563eb; border-color: #1d4ed8; }
    .btn-outline-light { border-color: #4b5563; color: #e5e7eb; }
    .metric-card { background: linear-gradient(135deg, #111827 0%, #0b1020 100%) !important; border: 1px solid #243244; }
    .metric-value { color: #f8fafc; } .metric-label { color: #9ca3af; }
    .trend-up { color: #34d399 !important; } .trend-down { color: #f87171 !important; }
    .chart-container { background: #0b1020; border: 1px solid #1f2937; border-radius: 12px; padding: 0.5rem; }


    .table td, .table th { color: #ffffff !important; background-color: transparent !important; }
    .table-striped>tbody>tr:nth-of-type(odd)>* { background-color: rgba(255,255,255,0.05) !important; }
    .table-striped>tbody>tr:nth-of-type(even)>* { background-color: rgba(255,255,255,0.08) !important; }
    .table-responsive::-webkit-scrollbar { height: 6px; }
    .table-responsive::-webkit-scrollbar-thumb { background-color: #3b82f6; border-radius: 4px; }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm border-bottom border-secondary">
    <div class="container d-flex align-items-center justify-content-between">
      <a class="navbar-brand" href="/static/main.html">Alpha Dashboard</a>

      <div class="d-flex align-items-center gap-2">
        <a class="btn btn-sm btn-primary" href="/static/news.html" title="Latest market news">Market News</a>

        <a class="btn btn-sm btn-outline-light" href="/static/macro.html" title="Macro indicators">Macro</a>

        <span class="navbar-text me-2" id="welcomeUser">Welcome!</span>
        <button class="btn btn-outline-light btn-sm" id="logoutBtn">Logout</button>
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    <div class="card">
      <div class="card-body">
        <h2 class="card-title mb-4">Financial Analysis</h2>

        <div class="row mb-4">
          <div class="col-md-8">
            <label for="tickerInput" class="form-label">Enter Stock Tickers</label>
            <div class="input-group">
              <input type="text" class="form-control" id="tickerInput" placeholder="e.g., AAPL, TSLA, GOOGL" value="AAPL,MSFT">
              <button class="btn btn-primary" id="fetchDataBtn">Analyze</button>
            </div>
          </div>
        </div>

        <div id="loading" class="text-center d-none">
          <div class="spinner-border text-light" role="status"></div>
        </div>

        <div id="dataDisplay" class="d-none">
          <div class="row" id="metricsRow"></div>

          <div class="row">
            <div class="col-lg-8">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title" id="mainChartTitle">EBITDA Trend</h5>
                  <div class="chart-container"><canvas id="ebitdaChart"></canvas></div>
                </div>
              </div>
            </div>

            <div class="col-lg-4">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title" id="tableTitle">Quarterly EBITDA Details</h5>
                  <div class="table-responsive">
                    <table class="table table-striped" id="ebitdaTable">
                      <thead><tr><th>Quarter</th><th>EBITDA ($)</th><th>Change</th><th>Trend</th></tr></thead>
                      <tbody id="ebitdaTableBody"></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <div class="row mt-4">
            <div class="col-lg-6">
              <div class="card"><div class="card-body">
                <h5 class="card-title">Revenue Trend</h5>
                <div class="chart-container"><canvas id="revenueChart"></canvas></div>
              </div></div>
            </div>
            <div class="col-lg-6">
              <div class="card"><div class="card-body">
                <h5 class="card-title">Net Income Trend</h5>
                <div class="chart-container"><canvas id="netIncomeChart"></canvas></div>
              </div></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/static/dashboard.js"></script>
</body>
</html>